<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unhas Perfeitas e Autoestima Renovada com Rosane Campos em Gravata√≠</title>
    <meta name="description" content="Manicure que atrav√©s das unha eleva a sua autoestima. Atendimento personalizado e seguro em Gravata√≠. Agende seu momento e sinta-se linda!">
    <meta name="facebook-domain-verification" content="mp1oj81t2mrqjgo4ofnrbrldsd16z3" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://i.imgur.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <script>
    // Pixel FB (Certifique-se que este √© seu c√≥digo completo e correto)
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1312994806657918'); // Use o ID do seu Pixel
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1312994806657918&ev=PageView&noscript=1"/></noscript>

    <style>
        /* --- Todas as suas regras CSS anteriores V√äM AQUI --- */
        :root { /* ... suas vari√°veis ... */ }
        * { /* ... reset ... */ }
        html { /* ... */ }
        body { /* ... */ }
        .container { /* ... */ }
        /* ... todos os estilos para h1, p, section, bot√µes, benef√≠cios, carrossel, depoimentos, etc ... */

        /* --- Estilos do Formul√°rio (Mantidos) --- */
         .form-cta-section { /* ... */ }
        .form-cta-section h3 { /* ... */ }
        .form-cta-section .form-subtitle { /* ... */ }
        #leadForm { /* ... */ position: relative; /* Necess√°rio para cursor wait */ }
        #leadForm label { /* ... */ }
        #leadForm input[type="text"], #leadForm input[type="email"], #leadForm input[type="tel"] { /* ... */ }
        #leadForm input:focus { /* ... */ }
        #leadForm input.invalid-submit { /* ... */ }
        .microcopy { /* ... */ }
        #formError { /* ... */ }

        /* --- CSS para Experi√™ncia Emocional de Carregamento (Como na vers√£o anterior) --- */
        #formSuccessMessage {
            min-height: 10em; display: none; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            background-color: rgba(255, 255, 255, 0.9); border-radius: var(--border-radius);
            border: none; box-shadow: var(--shadow-sm);
            margin-bottom: var(--space-md); transition: opacity 0.5s ease-in-out;
        }
        #emotionalLoader {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; width: 100%; gap: var(--space-sm);
            padding: var(--space-md) 0;
        }
        #heartPulse {
            font-size: 4rem; color: var(--color-border-light); line-height: 1;
            animation: heartBeat 6.8s ease-in-out forwards; opacity: 0;
        }
        #emotionalProgress {
            width: 80%; max-width: 250px; height: 8px;
            background-color: var(--color-border-light); border-radius: var(--border-radius-pill);
            overflow: hidden; margin-top: var(--space-xs);
        }
        #emotionalProgressBar {
            width: 0%; height: 100%; background-color: var(--color-secondary);
            border-radius: var(--border-radius-pill); animation: progressBarFill 6.8s linear forwards;
            transition: background-color 1s ease-in-out;
        }
        #pulseMessage {
            font-size: var(--text-md); color: var(--color-text-muted); font-family: var(--font-title);
            font-weight: 600; min-height: 1.5em; margin-top: var(--space-xs);
            opacity: 0; transition: opacity 0.6s ease-in-out;
        }
        @keyframes heartBeat { /* ... defini√ß√£o da anima√ß√£o ... */
             0% { transform: scale(0.95); opacity: 0.5; color: var(--color-border-light); }
            15% { /* ~1s */ transform: scale(1); opacity: 1; color: #f8bbd0; /* Rosa bem claro */ }
            25% { /* ~1.6s */ transform: scale(0.98); opacity: 0.9; color: var(--color-background-gradient-end); }
            40% { /* ~2.6s */ transform: scale(1.05); opacity: 1; color: var(--color-secondary); }
            65% { /* ~4.2s */ transform: scale(1); opacity: 1; color: var(--color-secondary); }
            80% { transform: scale(1.1); opacity: 1; color: var(--color-primary); }
            100% { transform: scale(1); opacity: 1; color: var(--color-primary); }
        }
        @keyframes progressBarFill { /* ... defini√ß√£o da anima√ß√£o ... */
             0% { width: 0%; background-color: #f8bbd0; } /* Come√ßa rosa claro */
            40% { background-color: var(--color-secondary); } /* Muda para cor principal */
            100% { width: 100%; background-color: var(--color-primary); } /* Termina com cor mais forte */
        }

        /* --- Estilos de Loading (Incluindo cursor: wait) --- */
        #leadForm.loading-emotional {
             cursor: wait; /* Cursor de espera ADICIONADO */
        }
        #leadForm.loading-emotional .whatsapp-btn {
           opacity: 0 !important; pointer-events: none !important;
           transition: opacity 0.5s ease;
        }
        #leadForm.loading-emotional > div { /* Esmaece campos */
            opacity: 0.3; pointer-events: none;
            transition: opacity 0.5s ease;
        }
        /* --- FIM CSS Experi√™ncia Emocional --- */

        /* --- Estilos Bot√£o Flutuante, Rodap√©, Media Queries (Mantidos) --- */
        #floating-whatsapp-button { /* ... */ }
        #floating-whatsapp-button:hover { /* ... */ }
        #floating-whatsapp-button svg { /* ... */ }
        footer { /* ... */ }
        /* ... todos os outros estilos de rodap√© e media queries ... */
         @media (max-width: 600px) {
             /* ... todos os ajustes responsivos ... */
             #heartPulse { font-size: 3rem; }
             #pulseMessage { font-size: var(--text-sm); }
         }

    </style>
</head>
<body>
    <div class="container">

        <header class="profile-header">
            <img src="https://i.imgur.com/o4cHVYE.jpeg" alt="Rosane Campos - Nail Designer Profissional em Gravata√≠" class="profile-pic" loading="lazy">
            <h1>Aqui suas unhas viram autoestima üíÖ</h1>
            <p class="returning-visitor-message" id="returningMessage">
                 üéÅ Que bom te ver de novo! Agende agora que te dou 10% de desconto na tua primeira visita!
            </p>
            <p class="subtext-principal text-block-centered" id="mainSubtitle">Um atendimento que cuida das suas m√£os como se fossem minhas, aqui em Gravata√≠.</p>
        </header>

        <section class="about-section section" id="sobre">
            <h2>Conhe√ßa a Rosane</h2>
             <img src="https://i.imgur.com/oEkdLRq.jpeg" alt="Foto da Rosane Campos" class="about-photo" loading="lazy">
            <p class="text-block-centered">Ol√°, sou a Rosane Campos! Minha paix√£o √© transformar unhas e elevar a autoestima das minhas clientes aqui em Gravata√≠. Estou no <strong>Centro</strong> de Gravata√≠¬† e sou especialista em <strong>Alongamento em molde F1</strong> e <strong>Soft Gel</strong>, meu compromisso vai al√©m da beleza: ofere√ßo um momento de relaxamento, cuidado e aten√ß√£o exclusiva para voc√™. A higiene √© minha prioridade m√°xima. Adoro entender seu estilo e criar unhas que te fa√ßam sentir ainda mais linda e confiante. Vamos conversar?</p>
              <a href="#contato" class="scroll-to-form-btn scroll-to-form-trigger" data-context="sobre"> Quero agendar meu hor√°rio!
              </a>
        </section>

        <section class="welcome-section section" id="beneficios">
             <h2>Por Que Escolher a Rosane?</h2>
             <div class="benefit-item"> <span class="emoji">üíñ</span> <div> <strong>Atendimento Personalizado</strong> <p>Aqui voc√™ n√£o √© s√≥ mais uma. Cuidado e exclusividade.</p> <a href="#contato" class="benefit-scroll-cta scroll-to-form-trigger" data-context="atendimento">Saiba mais sobre meu atendimento &rarr;</a> </div> </div>
             <div class="benefit-item"> <span class="emoji">üíé</span> <div> <strong>Qualidade e Durabilidade</strong> <p>Produtos de alta linha e t√©cnicas que impressionam.</p> <a href="#contato" class="benefit-scroll-cta scroll-to-form-trigger" data-context="qualidade">Conhe√ßa os produtos que uso &rarr;</a> </div> </div>
             <div class="benefit-item"> <span class="emoji">üåø</span> <div> <strong>Higiene e Seguran√ßa</strong> <p>Ambiente 100% seguro e foco total na sua sa√∫de.</p> <a href="#contato" class="benefit-scroll-cta scroll-to-form-trigger" data-context="higiene">Veja meus protocolos de seguran√ßa &rarr;</a> </div> </div>
             <div class="benefit-item"> <span class="emoji">‚è∞</span> <div> <strong>Seu Tempo √© Precioso</strong> <p>Respeito aos hor√°rios agendados, sem atrasos.</p> <a href="#contato" class="benefit-scroll-cta scroll-to-form-trigger" data-context="tempo">Agende seu hor√°rio agora &rarr;</a> </div> </div>
        </section>

        <section class="carousel-section section" id="trabalhos">
            <h2>Meu Trabalho</h2>
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="https://i.imgur.com/rmSvjtE.jpeg" alt="Manicure Profissional - Exemplo 1" loading="lazy">
                          <p class="carousel-caption-inner">Eleg√¢ncia em Nude com detalhes sutis.</p>
                    </div>
                    <div class="swiper-slide">
                         <img src="https://i.imgur.com/RnIBQtc.jpeg" alt="Unhas Decoradas - Exemplo 2" loading="lazy">
                          <p class="carousel-caption-inner">Francesinha moderna e sofisticada.</p>
                    </div>
                    <div class="swiper-slide">
                         <img src="https://i.imgur.com/y69FYjT.jpeg" alt="Esmalta√ß√£o em Gel - Exemplo 3" loading="lazy">
                          <p class="carousel-caption-inner">Delicadeza em tons pastel com brilho.</p>
                    </div>
                    <div class="swiper-slide">
                         <img src="https://i.imgur.com/lBmYtv6.jpeg" alt="Nail Art Delicada - Exemplo 4" loading="lazy">
                          <p class="carousel-caption-inner">Vermelho cl√°ssico com acabamento impec√°vel.</p>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
            <p class="carousel-caption-footer">Fotos de trabalhos reais feitos com carinho ‚ù§Ô∏è</p>
        </section>

        <section class="testimonials-section section" id="depoimentos">
             <h2>O Que Dizem as Clientes</h2>
             <div class="testimonial-card">
                 <p class="testimonial-quote">"Amei o resultado! Minhas unhas nunca duraram tanto e o atendimento da Rosane √© maravilhoso, super atenciosa. Ambiente impec√°vel!"</p>
                  <p class="testimonial-author"><img src="https://i.imgur.com/6lm7ClX.png" alt="Foto Ana P." loading="lazy"><strong>Juliana P.</strong> - Gravata√≠/RS</p>
             </div>
             <div class="testimonial-card">
                 <p class="testimonial-quote">"Profissional excelente! Entendeu exatamente o que eu queria e minhas unhas ficaram perfeitas. Recomendo muito!"</p>
                  <p class="testimonial-author"><img src="https://i.imgur.com/2qQytwz.jpeg" alt="Foto Mariana S." loading="lazy"><strong>Veridiana M.</strong> - Porto Alegre/RS</p>
             </div>
              <div class="testimonial-card">
                 <p class="testimonial-quote">"Al√©m das unhas ficarem lindas, me senti super relaxada no atendimento. A Rosane √© um amor e muito caprichosa."</p>
                   <p class="testimonial-author"><img src="https://i.imgur.com/DgRHbhs.jpeg" alt="Foto Juliana R." loading="lazy"><strong>Vanessa P.</strong> - Gravata√≠/RS</p>
             </div>
        </section>

        <section class="form-cta-section section" id="contato">
            <h3 id="formTitle">Agende seu Hor√°rio üíÖ</h3>
            <p class="form-subtitle">Preencha abaixo para agilizar seu atendimento!</p>
             <div id="formSuccessMessage"></div>
             <div id="formError" style="display: none;"></div>
            <form id="leadForm" novalidate>
                 <div><label for="firstName">Primeiro Nome:</label><input type="text" id="firstName" name="firstName" required></div>
                 <div><label for="lastName">Sobrenome:</label><input type="text" id="lastName" name="lastName" required></div>
                 <div><label for="email">Melhor E-mail:</label><input type="email" id="email" name="email" required><p class="microcopy">Apenas para confirma√ß√µes.</p></div>
                 <div><label for="phone">WhatsApp (com DDD):</label><input type="tel" id="phone" name="phone" required pattern="[0-9]{11}" maxlength="11" title="Ex: 51999998888" placeholder="Ex: 51999998888"><p class="microcopy">Para agendarmos rapidinho!</p></div>
                 <button type="submit" class="btn whatsapp-btn" id="submitButton">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" aria-hidden="true"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.8 0-67.6-9.5-97.2-27.2l-4.7-2.8-71.8 18.8 19.2-70.1-3.1-5.1c-18.1-29.9-28.1-64.6-28.1-100.9 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
                      <span>Confirmar Agendamento</span>
                 </button>
            </form>
        </section>

         <footer>
             <p>üìç Atendimento em Gravata√≠/RS ‚Äì <strong>Jos√© Loureiro da Silva 2251 - CENTRO</strong></p>
             <div class="social-links">
                  <a href="https://wa.me/555198501604?text=Ol%C3%A1%20Rosane!%20Vi%20sua%20p√°gina%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es." target="_blank" rel="noopener noreferrer" title="Fale comigo no WhatsApp" aria-label="Abrir conversa no WhatsApp">
                      <i class="fab fa-whatsapp"></i>
                  </a>
                   <a href="https://www.instagram.com/rosanecampos.nails?igsh=MTc3NTVwMmhmenp1Nw==" target="_blank" rel="noopener noreferrer" title="Siga-me no Instagram" aria-label="Abrir perfil no Instagram">
                      <i class="fab fa-instagram"></i>
                  </a>
             </div>
             <p>&copy; <span id="currentYear"></span> Rosane Campos Nail Design.</p>
             <p><a href="politica-privacidade.html" target="_blank" rel="noopener noreferrer" title="Leia nossa Pol√≠tica de Privacidade">Pol√≠tica de Privacidade</a> | LGPD</p>
              <div class="footer-seals">
                 <span>üîí Dados seguros</span>
                 <span><span class="footer-emoji">‚ù§Ô∏è</span><strong>Compromisso em cada atendimento.</strong></span>
             </div>
        </footer>

    </div>

    <a href="https://wa.me/555198501604?text=Ol%C3%A1%20Rosane!%20Vi%20sua%20p√°gina%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es." target="_blank" rel="noopener noreferrer" id="floating-whatsapp-button" title="Fale com a Rosane no WhatsApp" aria-label="Iniciar conversa com Rosane Campos no WhatsApp">
         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.8 0-67.6-9.5-97.2-27.2l-4.7-2.8-71.8 18.8 19.2-70.1-3.1-5.1c-18.1-29.9-28.1-64.6-28.1-100.9 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
    // --- Vari√°veis Globais ---
    let formEntryContext = null;
    let apiResult = "pending";

    // --- Fun√ß√µes Auxiliares ---
    function getCookie(name) { const value = "; " + document.cookie; const parts = value.split("; " + name + "="); return parts.length === 2 ? parts.pop().split(";").shift() : null; }

    function handleReturningVisitor() {
        const returningMessageElement = document.getElementById('returningMessage');
        const mainSubtitleElement = document.getElementById('mainSubtitle');
        const h1Element = document.querySelector('.profile-header h1');
        const formTitleElement = document.getElementById('formTitle');
        if (!returningMessageElement || !mainSubtitleElement || !h1Element || !formTitleElement) { console.error("Elementos n√£o encontrados em handleReturningVisitor."); return; }
        if (localStorage.getItem('rosane_visited_before')) {
            h1Element.innerText = 'Voc√™ voltou! Que bom te ver de novo üíñ'; mainSubtitleElement.innerText = 'Sua beleza est√° esperando! Vamos agendar seu hor√°rio?';
            returningMessageElement.style.display = 'block'; formTitleElement.innerText = 'Vamos finalizar seu agendamento? üòâ';
        } else { localStorage.setItem('rosane_visited_before', 'true'); returningMessageElement.style.display = 'none'; }
    }

    function setFormContext(context) {
        console.log("Contexto definido para o formul√°rio:", context);
        formEntryContext = context;
    }

    // --- L√≥gica Principal no DOMContentLoaded ---
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById("currentYear").textContent = new Date().getFullYear();
        try {
            var swiper = new Swiper(".mySwiper", { slidesPerView: 1, spaceBetween: 20, loop: true, grabCursor: true, pagination: { el: ".swiper-pagination", clickable: true }, autoplay: { delay: 4500, disableOnInteraction: false }, effect: "slide" });
        } catch (e) { console.error("Erro Swiper:", e); }

        handleReturningVisitor();

        // --- Listeners para os gatilhos de contexto ---
        const scrollTriggers = document.querySelectorAll('.scroll-to-form-trigger');
        scrollTriggers.forEach(trigger => {
            trigger.addEventListener('click', function(e) {
                 e.preventDefault();
                 const context = this.getAttribute('data-context');
                 setFormContext(context);
                 const contactSection = document.getElementById('contato');
                 if(contactSection) { contactSection.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
            });
        });

        // --- L√≥gica do Formul√°rio ---
        const leadForm = document.getElementById('leadForm');
        const submitButton = document.getElementById('submitButton');
        const formSuccessMessage = document.getElementById('formSuccessMessage');
        const formError = document.getElementById('formError');
        const phoneInput = document.getElementById('phone'); // Lembre-se da sugest√£o da m√°scara de telefone aqui

        if (leadForm && submitButton && formSuccessMessage && formError) {
            leadForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                formError.style.display = 'none';
                let isValid = true;
                apiResult = "pending";

                // Valida√ß√£o (Mantida como antes)
                 Array.from(leadForm.elements).forEach(input => {
                    input.classList.remove('invalid-submit'); input.style.borderColor='';
                    if (input.offsetParent !== null && typeof input.checkValidity === 'function' && !input.checkValidity()){
                         isValid = false; input.classList.add('invalid-submit'); input.style.borderColor='var(--color-error)';
                    }
                 });
                if (!isValid) { formError.textContent = "Ops! Verifique os campos marcados."; formError.style.display = 'block'; return; }

                // --- In√≠cio da L√≥gica da Anima√ß√£o Emocional ---
                let successContainer; // Declarar fora para acesso no catch/finally
                submitButton.disabled = true; // Desabilitar bot√£o ANTES do try

                try {
                    leadForm.classList.add('loading-emotional'); // Adiciona classe e cursor:wait

                    successContainer = document.getElementById('formSuccessMessage');
                    successContainer.innerHTML = `
                        <div id="emotionalLoader">
                            <div id="heartPulse"><i class="fas fa-heart"></i></div>
                            <div id="emotionalProgress"><div id="emotionalProgressBar"></div></div>
                            <div id="pulseMessage">&nbsp;</div>
                        </div>
                    `;
                    successContainer.style.display = 'flex';
                    successContainer.style.opacity = '1';

                    const messageElement = document.getElementById('pulseMessage');
                    if (!messageElement) throw new Error("#pulseMessage n√£o encontrado ap√≥s inje√ß√£o HTML."); // Lan√ßa erro se falhar
                    messageElement.style.opacity = 0;

                    // --- L√ìGICA DA API EM PARALELO (MANTIDA) ---
                    let apiPromise = new Promise((resolve, reject) => {
                        console.log("Iniciando envio CAPI...");
                        const firstName = document.getElementById('firstName').value.trim();
                        const lastName = document.getElementById('lastName').value.trim();
                        const email = document.getElementById('email').value.trim();
                        const phone = document.getElementById('phone').value.trim();
                        const fbp = getCookie("_fbp");
                        let externalId = localStorage.getItem("external_id");
                        if (!externalId) { externalId = "user_" + Math.random().toString(36).substring(2) + Date.now(); localStorage.setItem("external_id", externalId); }
                        const proxyUrl = "https://rosane-proxy-api.onrender.com/api/conversion"; // Sua URL de proxy
                        const eventData = { event_name: "Lead", event_source_url: window.location.href, fbp: fbp || "NA", external_id: externalId, user_data: { fn: firstName, ln: lastName, em: email, ph: phone } };

                        fetch(proxyUrl, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(eventData) })
                            .then(response => response.json().then(data => ({ ok: response.ok, data, status: response.status })))
                            .then(({ ok, data, status }) => {
                                if (!ok) throw new Error(`Erro CAPI ${status}: ${data?.message || 'API Error'}`); // Melhor log de erro
                                console.log("Sucesso CAPI:", data);
                                apiResult = "success"; resolve({ status: "success", data: data });
                            })
                            .catch(error => {
                                console.error("Falha no envio CAPI:", error);
                                apiResult = "error"; reject(error); // Rejeita para o catch externo da Promise
                            });
                     }).catch(err => {
                         // Captura rejei√ß√£o da promise da API para evitar erro n√£o tratado globalmente
                         // O estado apiResult = "error" j√° foi definido no .catch() interno do fetch
                         console.warn("Promise da API CAPI foi rejeitada:", err.message || err);
                     });
                    // --- FIM DA L√ìGICA DA API EM PARALELO ---

                    // 3. Agendar as mensagens com fade
                    setTimeout(() => { if(messageElement) { messageElement.innerText = "recebi teu nome üíå"; messageElement.style.opacity = 1; } }, 1000);
                    setTimeout(() => { if(messageElement) { messageElement.style.opacity = 0; setTimeout(() => { messageElement.innerText = "validando teu momento..."; messageElement.style.opacity = 1; }, 600); } }, 1600);
                    setTimeout(() => { if(messageElement) { messageElement.style.opacity = 0; setTimeout(() => { messageElement.innerText = "essa conex√£o j√° t√° pulsando aqui üíì"; messageElement.style.opacity = 1; }, 600); } }, 2600);
                    setTimeout(() => { if(messageElement) { messageElement.style.opacity = 0; setTimeout(() => { messageElement.innerText = "me d√° s√≥ um segundinho... j√° t√¥ indo te buscar üíñ"; messageElement.style.opacity = 1; }, 600); } }, 4200); // Adicionado 'if(messageElement)' como seguran√ßa extra

                    // 4. Redirecionamento final
                    setTimeout(() => {
                        console.log("Tempo final (6.8s) atingido, redirecionando...");
                        const firstNameForUrl = document.getElementById('firstName').value.trim();
                        let baseMessage = `Ol√° Rosane! Me chamo ${firstNameForUrl}.`;
                        let contextMessage = "";
                        switch (formEntryContext) {
                             case 'sobre': contextMessage = " Vi sua apresenta√ß√£o na p√°gina e gostaria de agendar um hor√°rio."; break;
                             case 'atendimento': contextMessage = " Vi na p√°gina sobre o atendimento personalizado e gostaria de saber mais para agendar."; break;
                             case 'qualidade': contextMessage = " Gostei de saber sobre a qualidade dos produtos na sua p√°gina e quero agendar."; break;
                             case 'higiene': contextMessage = " Vi na p√°gina sobre a higiene e seguran√ßa, e gostaria de marcar um hor√°rio."; break;
                             case 'tempo': contextMessage = " Valorizo meu tempo, como vi na sua p√°gina. Gostaria de verificar a agenda."; break;
                             default: contextMessage = " Encontrei sua p√°gina e gostaria de mais informa√ß√µes para agendar.";
                        }
                        const preFilledMessage = baseMessage + contextMessage;
                        const whatsappUrl = `https://wa.me/555198501604?text=${encodeURIComponent(preFilledMessage)}`; // SEU NUMERO

                        if (apiResult === "error") { console.warn("Redirect WhatsApp, mas CAPI falhou."); }
                        else if (apiResult === "pending") { console.warn("Redirect WhatsApp, mas CAPI pendente."); }
                        else { console.log("Redirect WhatsApp. CAPI OK."); }
                        window.location.href = whatsappUrl;
                    }, 6800); // 6.8 segundos

                } catch (setupError) {
                     console.error("Erro durante configura√ß√£o da anima√ß√£o ou disparo dos timers:", setupError);
                     formError.textContent = "Ocorreu um erro interno ao processar. Tente novamente.";
                     formError.style.display = 'block';
                     if(successContainer) successContainer.style.display = 'none'; // Esconde anima√ß√£o no erro
                     // Reabilita bot√£o e remove classe de loading APENAS se houver erro no setup
                     submitButton.disabled = false;
                     leadForm.classList.remove('loading-emotional');
                } finally {
                     formEntryContext = null; // Limpa contexto SEMPRE
                     // Agendamento para remover a classe AP√ìS redirect (melhoria opcional)
                     // N√£o reabilitamos o bot√£o aqui, pois o fluxo normal √© o redirect
                     setTimeout(() => { leadForm.classList.remove('loading-emotional'); }, 7500); // Tempo > 6.8s
                }
            }); // Fim do event listener 'submit'
        } else {
            console.error("Elementos essenciais do formul√°rio n√£o encontrados no DOM.");
        }
    }); // Fim DOMContentLoaded
    </script>

</body>
</html>
