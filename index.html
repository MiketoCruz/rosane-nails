<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rosane Campos Nail Design</title>
  <link rel="stylesheet" href="style.css">

  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  // Substitua 'SEU_PIXEL_ID' pelo ID real do seu Pixel
  fbq('init', '1312994806657918');
  fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1312994806657918&ev=PageView&noscript=1"/>
  </noscript>
  </head>
<body>
  <div class="container">
    <div class="profile-pic">
      <img src="https://i.imgur.com/o4cHVYE.jpeg" alt="Foto de Rosane Campos">
    </div>
    <h1>Rosane Campos Nail Design</h1>
    <p class="subtext">üíÖ A beleza come√ßa nas suas m√£os</p>
    <p class="welcome">Seja bem-vinda! Aqui cada detalhe √© feito com carinho üíñ</p>
    <p class="truth">O primeiro passo pra fidelidade √© o cuidado real com voc√™ ‚ú®</p>

    <div class="carousel">
      <img src="https://i.imgur.com/XoQS1ua.jpeg" alt="Exemplo de trabalho de unha 1">
      <img src="https://i.imgur.com/1vbr699.jpeg" alt="Exemplo de trabalho de unha 2">
      </div>

    <a class="btn whatsapp" href="#" onclick="enviarEvento(event)">
      üìû Agendar pelo WhatsApp
    </a>
    <a class="btn preencher" href="#">
      üìù Ver Tabela de Pre√ßos (Exemplo)
      </a>

    <footer>
      <p>Qualidade, cuidado e beleza nas suas m√£os</p>
      </footer>
  </div>

  <script>
    // Fun√ß√£o para buscar o valor de um cookie pelo nome
    function getCookie(name) {
      const value = "; " + document.cookie;
      const parts = value.split("; " + name + "=");
      // Se encontrou o cookie, retorna o valor, sen√£o null
      return parts.length === 2 ? parts.pop().split(";").shift() : null;
    }

    // Tenta pegar um ID externo do localStorage ou gera um novo
    let externalId = localStorage.getItem("external_id");
    if (!externalId) {
      // Gera um ID √∫nico combinando aleatoriedade e timestamp
      externalId = "user_" + Math.random().toString(36).substring(2) + Date.now();
      // Salva o novo ID no localStorage para persistir entre visitas
      localStorage.setItem("external_id", externalId);
    }

    // Pega o valor do cookie _fbp (ID do navegador do Facebook)
    const fbp = getCookie("_fbp");

    // Fun√ß√£o chamada quando o bot√£o do WhatsApp √© clicado
    function enviarEvento(event) {
      // Previne o comportamento padr√£o do link (que seria navegar para '#')
      event.preventDefault();

      // URL do seu servidor proxy (onde est√° o c√≥digo que envia para a CAPI)
      const proxyUrl = "https://rosane-proxy.onrender.com/api/conversion"; // CONFIRME SE ESSA √â A URL CORRETA DO SEU PROXY NA RENDER

      // Dados a serem enviados para o proxy
      const eventData = {
        event_name: "Lead", // Nome do evento padr√£o para lead
        event_source_url: window.location.href, // URL da p√°gina atual
        fbp: fbp || "NA", // Envia o _fbp se existir, sen√£o envia "NA"
        external_id: externalId // ID √∫nico gerado para este usu√°rio/sess√£o
        // Adicione outros dados se necess√°rio (ex: user_agent, client_ip - mas estes geralmente s√£o pegos no servidor proxy)
      };

      // Faz a requisi√ß√£o POST para o servidor proxy
      fetch(proxyUrl, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(eventData) // Converte os dados para JSON
      })
      .then(response => {
         // Opcional: verificar se a resposta do proxy foi ok (status 2xx)
         console.log("Proxy response status:", response.status);
         if (!response.ok) {
            console.error("Erro ao enviar evento para o proxy.");
         }
      })
      .catch(error => {
        // Captura erros de rede ao tentar falar com o proxy
        console.error("Erro na requisi√ß√£o fetch para o proxy:", error);
      })
      .finally(() => {
        // ESTE C√ìDIGO EXECUTA SEMPRE, tendo o fetch funcionado ou n√£o.
        // Redireciona o usu√°rio para o link do WhatsApp.
        // IMPORTANTE: Substitua pelo link correto do WhatsApp da Rosane!
        const whatsappUrl = "https://wa.me/5551998501604?text=Oi%20Rosane!%20Vi%20sua%20p√°gina%20e%20quero%20saber%20mais%20sobre%20as%20unhas!";
        window.location.href = whatsappUrl;
      });
    }
  </script>
</body>
</html>
